# DCR币的权益证明（POS）挖矿指南
*原创: [DCR中文社区](https://mp.weixin.qq.com/s?__biz=MzUzNDI5NjA0Mw==&mid=2247483676&idx=1&sn=acee6d314a544c42f797917f08ae9554&chksm=fa97a598cde02c8eed066b68a4344ae497a8967e0ff6c49b160db2815ee6fe0f4a7b6f3b6d18&scene=21#wechat_redirect) 2017-11-14*

![how_to_proof_of_stake](img/how_to_proof_of_stake.jpg)

v1.0.0版本
翻译人：Dearlife  
文本翻译自：https://docs.decred.org/mining/proof-of-stake/#paymetheus

此文件是DCR币的权益证明（POS）挖矿的指南，包含POS挖矿的目的、挖矿过程简介、选票的生命周期、以及怎样挖矿。

###总览

DCR币的权益证明（POS）挖矿协议有多重价值：

是权益相关人（即持币人）支持某一项新共识的方式。即，持币人可以为DCR区块链的某项新提案投票。提案的内容可以包括：开发团队是否要在某项新功能的开发上投入时间，是否要激活某项已经开发完成的功能，怎么使用开发团队的预留经费等。更多信息可见主链投票指南[consensus-rules-voting](https://docs.decred.org/governance/consensus-rule-voting/consensus-rules-voting)页面。

###挖矿说明

为了参与POS挖矿，持币人需要锁定一部分的币来换取选票（ticket）。每张选票可以为持币人进行一次投票（vote）。投票完成，持币人可以得到奖励并返还原始的选票价（即锁定的币）。每张选票会被随机的选择进行投票，平均被选到的等待时间是28天，但是最长可能长达142天，并且有0.5%的几率选票作废，作废的选票没有奖励。每个区块生成后要有5张投票来进行确认，少于5张确认投票时矿工的区块奖励会将会减少以示惩罚。同时，每个区块最多能生成20张新选票。

如果你参与POS挖矿 ，下面一些信息请悉知。

每144个区块（约12小时），权益难度算法将会调整选票价格，使得选票池的票数在40960左右。144个区块窗口期这里叫做StakeDiffWindowSize。

选票价格/权益难度指的是某144个区块窗口期内购买选票需要被锁定的币的数量。

选票池（Ticket Pool）指的是DCR系统里所有的选票数。

选票费（ticketfee）指的是支付给POW（工作量证明）矿工，将新选票放入新挖区块的费用。选票费将以dcr/kB的字节长度计价，字节越长付费越高。例如，个人选票的字节长度约300B，如果票价是0.3dcr/kB，选票费就约是0.1 dcr（这只是个例子，实际没这么高）。选票费仅在选票被纳入区块的时候收取，不纳入不收取。

如果在某个选票窗口期选票价（ticket price）很低时，将可能发生持币人竞相购票使得选票费（ticket fee）上涨。一般来说，选票价不是极端低的时候，0.001 dcr/kB的选票费率足矣。

当某张选票被征召投票时，有投票权的钱包必须在线。如果

在线，选票就要丢失，也就没有区块奖励。如果不能保证全天候在线，可以选择权益矿池（Stakepools）代为投票。

权益矿池可以帮助持币人代为投票，当然要收取一定的代理费，代理费一般不超过持币人区块奖励的7%。这个代理费叫做矿池费（Pool Fee），从持币人区块奖励中收取。下面有一个权益矿池的列表。

###选票的生命周期

购买POS挖矿的选票容易，之后呢？一张选票将经历如下的生命周期：

你可以从Paymetheus或dcrwallet钱包中买选票。总购票成本为选票价+选票费（Ticket Price + Ticket Fee）

选票进入内存池（mempool），等待POW矿工来挖。每个区块生成的时候最多有20张选票从内存池中挖出。

内存池中选票费高的票更有机会被选中。选票费以dcr/kB计价。通常，个人票的字节长度为298B，权益矿池票的字节长度是539B。

A – 刚被纳入区块的选票，叫做未成熟票（immature ticket）。未成熟票需要等待256个区块（约20小时）成熟。未成熟票不可以投票。此时，选票费已经不能退回了。

B – 未被纳入区块的选票，选票价和选票费都会被退回到钱包。

256个区块后，选票成熟，选票进入选票池，可被用于投票。

选票被选中投票的平均等待时间是28天，等待时间服从泊松概率分布。28天内被选中的概率是50%。

由于选票池的大小被控制在40960左右，且142天（4.7个月）被选中的概率为99.5%，所以，142天之后，选票没有被选中将过期。选票价将退回，但是没有区块奖励。

选票在这两种情况下丢失：

钱包在被征召投票时没有回应，

两个区块生成时间太靠近投票人来不及反应。此时，选票价将退回，但是没有区块奖励。

选票被用作投票后（或者丢失、过期后），资金（选票费和区块奖励收益，减去POS矿池费）进入未成熟状态，256个区块后被释放。如果选票丢失或过期，需要从钱包提交选票撤回交易（ticket revocation transaction），释放锁定的票价。注意：选票仅在丢失后才能撤回，不丢失不能撤回。

###怎样挖矿

全天候在线的钱包非常适合挖矿。

在线的钱包可能会错过投票时间失去奖励。不能够全天候在线的钱包持有人，可以选择权益矿池（Stakepools）代为操作。

权益矿池挖矿只要买一张选票。下面解释怎样用Paymetheus和dcrwallet钱包挖矿。

选择权益矿池挖矿，需要进行注册，官方认可的权益矿池见下面列表。

#####Paymetheus

Paymetheus钱包不能自己投票，需要权益矿池代为投票。可以查看Paymetheus钱包指南里的操作方法。

#####Dcrwallet

Dcrwallet钱包可以手动或自动购票，也可以选择矿池投票或个人投票。

官方认可的权益矿池查询：
https://www.decred.org/vsp/

矿池的费率和数据可在以上网站中查询（页面底部）。

 
 
